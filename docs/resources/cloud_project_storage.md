---
subcategory : "Object Storage"
---

# ovh_cloud_project_storage

Create S3™* compatible storage container (* S3 is a trademark filed by Amazon Technologies,Inc. OVHcloud's service is not sponsored by, endorsed by, or otherwise affiliated with Amazon Technologies,Inc.)

~> When destroying a storage container, the provider will try to remove all objects it contains beforehand. This process can fail if the bucket contains locked objects. In this case, you will have to remove these objects manually before being able to run `terraform destroy` again.

~> **Object Lock Removal:** Object Lock cannot be disabled once enabled on a bucket. If you remove the `object_lock` configuration block, Terraform will **destroy and recreate** the bucket, deleting all objects permanently. This is by design - there is no way to disable Object Lock on an existing bucket.

~> **Object Lock Status Change:** Changing `object_lock.status` between `disabled` and `enabled` forces bucket replacement. Object Lock must be enabled at bucket creation.

## Example Usage

### Basic Storage Container

```terraform
resource "ovh_cloud_project_storage" "storage" {
  service_name = "<public cloud project ID>"
  region_name = "GRA"
  name = "my-storage"
  versioning = {
    status = "enabled"
  }
}
```

### Storage Container with Object Lock

```terraform
resource "ovh_cloud_project_storage" "storage_with_lock" {
  service_name = "<public cloud project ID>"
  region_name  = "GRA"
  name         = "my-locked-storage"

  object_lock = {
    status = "enabled"
    rule = {
      mode   = "governance"
      period = "P30D" # 30 days retention
    }
  }
}
```

~> **Note:** The OVH S3 API normalizes ISO 8601 duration periods (e.g., `P7D` becomes `P1W`, `P14D` becomes `P2W`). The provider handles this automatically - you can use either format and Terraform will not detect drift.

### Storage Container with Encryption

```terraform
resource "ovh_cloud_project_storage" "storage_with_lock" {
  service_name = "<public cloud project ID>"
  region_name  = "GRA"
  name         = "my-encrypted-storage"

  encryption = {
    sse_algorithm = "AES256"
  }
}
```

<!-- schema generated by tfplugindocs -->

## Schema

### Required

- `name` (String) Container name
- `region_name` (String) Region name
- `service_name` (String) Service name

### Optional

- `encryption` (Attributes) Encryption configuration (see [below for nested schema](#nestedatt--encryption))
- `hide_objects` (Boolean) If true, objects list will not be saved in state (useful for large buckets)
- `limit` (Number) Limit the number of objects returned (1000 maximum, defaults to 1000)
- `marker` (String) Key to start with when listing objects
- `owner_id` (Number) Container owner user ID
- `prefix` (String) List objects whose key begins with this prefix
- `replication` (Attributes) Replication configuration (see [below for nested schema](#nestedatt--replication))
- `versioning` (Attributes) Versioning configuration (see [below for nested schema](#nestedatt--versioning))
- `object_lock` (Attributes) Object lock configuration (see [below for nested schema](#nestedatt--object_lock))

### Read-Only

- `created_at` (String) The date and timestamp when the resource was created
- `objects` (Attributes List) Container objects (see [below for nested schema](#nestedatt--objects))
- `objects_count` (Number) Container total objects count
- `objects_size` (Number) Container total objects size (bytes)
- `region` (String) Container region
- `virtual_host` (String) Container virtual host

<a id="nestedatt--encryption"></a>

### Nested Schema for `encryption`

Optional:

- `sse_algorithm` (String) Encryption algorithm

<a id="nestedatt--replication"></a>

### Nested Schema for `replication`

Optional:

- `rules` (Attributes List) Replication rules (see [below for nested schema](#nestedatt--replication--rules))

<a id="nestedatt--replication--rules"></a>

### Nested Schema for `replication.rules`

Optional:

- `delete_marker_replication` (String) Delete marker replication
- `destination` (Attributes) Rule destination configuration (see [below for nested schema](#nestedatt--replication--rules--destination))
- `filter` (Attributes) Rule filters (see [below for nested schema](#nestedatt--replication--rules--filter))
- `id` (String) Rule ID
- `priority` (Number) Rule priority
- `status` (String) Rule status

<a id="nestedatt--replication--rules--destination"></a>

### Nested Schema for `replication.rules.destination`

Required:

- `name` (String) Destination bucket name
- `region` (String) Destination region

Optional:

- `storage_class` (String) Destination storage class
- `remove_on_main_bucket_deletion` (Boolean) Whether to remove replicated bucket when the main bucket is deleted (make sure to apply your configuration when changing this value before deleting the main bucket)

<a id="nestedatt--replication--rules--filter"></a>

### Nested Schema for `replication.rules.filter`

Optional:

- `prefix` (String) Prefix filter
- `tags` (String to String Map) Tags filter

<a id="nestedatt--versioning"></a>

### Nested Schema for `versioning`

Optional:

- `status` (String) Versioning status (E.g. "enabled", "disabled" or "suspended")

<a id="nestedatt--object_lock"></a>

### Nested Schema for `object_lock`

Object Lock provides Write-Once-Read-Many (WORM) functionality, preventing objects from being deleted or overwritten for a specified retention period.

~> **Warning:** Object Lock **cannot be disabled** once enabled on a bucket. Removing the `object_lock` block from your configuration will trigger bucket replacement (destroy and recreate), deleting all objects. Changing `object_lock.status` between `disabled` and `enabled` also triggers replacement because Object Lock must be enabled at bucket creation.

Optional:

- `status` (String) Object lock status. Accepted values: `enabled`, `disabled`. Any change between `enabled` and `disabled` forces bucket replacement. Object Lock must be enabled at bucket creation.
- `rule` (Attributes) Object lock default retention rule. This sets the default retention period for all objects uploaded to the bucket. Individual objects can override this with their own retention settings. (see [below for nested schema](#nestedatt--object_lock--rule))

<a id="nestedatt--object_lock--rule"></a>

### Nested Schema for `object_lock.rule`

Optional:

- `mode` (String) Object lock retention mode. Accepted values:
  - `governance`: Users with special permissions can override or remove retention.
  - `compliance`: No user, including the root user, can override or remove retention until the period expires.
- `period` (String) The retention period in ISO 8601 duration format. Examples:
  - `P30D` - 30 days
  - `P1W` - 1 week (equivalent to `P7D`)
  - `P6M` - 6 months
  - `P1Y` - 1 year
  
  ~> **Note:** The OVH S3 API normalizes durations to canonical forms (e.g., `P7D` → `P1W`, `P14D` → `P2W`). The provider preserves your configured format to prevent drift.

<a id="nestedatt--objects"></a>

### Nested Schema for `objects`

Read-Only:

- `etag` (String) ETag
- `is_delete_marker` (Boolean) Whether this object is a delete marker
- `is_latest` (Boolean) Whether this is the latest version of the object
- `key` (String) Key
- `last_modified` (String) Last modification date
- `size` (Number) Size (bytes)
- `storage_class` (String) Storage class
- `version_id` (String) Version ID of the object

## Import

A storage in a public cloud project can be imported using the `service_name`, `region_name` and `name` attributes. Using the following configuration:

```terraform
import {
  id = "<service_name>/<region_name>/<name>"
  to = ovh_cloud_project_storage.storage
}
```

You can then run:

```bash
$ terraform plan -generate-config-out=storage.tf
$ terraform apply
```

The file `storage.tf` will then contain the imported resource's configuration, that can be copied next to the `import` block above. See https://developer.hashicorp.com/terraform/language/import/generating-configuration for more details.

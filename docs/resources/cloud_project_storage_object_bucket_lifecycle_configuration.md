---
subcategory : "Object Storage"
---

# ovh_cloud_project_storage_object_bucket_lifecycle_configuration

Manage the S3™* compatible lifecycle configuration for an OVHcloud Object Storage bucket.

(* S3 is a trademark filed by Amazon Technologies,Inc. OVHcloud's service is not sponsored by, endorsed by, or otherwise affiliated with Amazon Technologies,Inc.)

Lifecycle rules let you automatically expire objects, transition them to a cheaper storage class, or clean up incomplete multipart uploads based on age, prefix, tags, or object size.

~> **Note:** This resource uses a PUT/DELETE API — there is no separate create vs update endpoint. Creating and updating both call `PUT`. Destroying calls `DELETE` which removes the entire lifecycle configuration from the bucket.

~> **Note:** All three identity attributes (`service_name`, `region_name`, `container_name`) require resource replacement if changed.

## Example Usage

### Expire old objects

```terraform
resource "ovh_cloud_project_storage" "bucket" {
  service_name = "<public cloud project ID>"
  region_name  = "GRA"
  name         = "my-versioned-bucket"
  versioning = {
    status = "enabled"
  }
}

resource "ovh_cloud_project_storage_object_bucket_lifecycle_configuration" "lifecycle" {
  service_name   = ovh_cloud_project_storage.bucket.service_name
  region_name    = ovh_cloud_project_storage.bucket.region_name
  container_name = ovh_cloud_project_storage.bucket.name

  rules = [
    {
      id     = "expire-old-objects"
      status = "enabled"
      expiration = {
        days = 365
      }
    }
  ]
}
```

### Archive logs

```terraform
resource "ovh_cloud_project_storage_object_bucket_lifecycle_configuration" "lifecycle" {
  service_name   = "<public cloud project ID>"
  region_name    = "GRA"
  container_name = "my-bucket"

  rules = [
    {
      id     = "transition-to-standard-ia"
      status = "enabled"
      filter = {
        prefix = "archive/"
      }
      transitions = [
        {
          days          = 90
          storage_class = "STANDARD_IA"
        }
      ]
    },
    {
      id     = "transition-to-standard-ia-delayed"
      status = "enabled"
      filter = {
        prefix = "archive/"
      }
      transitions = [
        {
          days          = 180
          storage_class = "DEEP_ARCHIVE"
        }
      ]
    },
    {
      id     = "expire-logs"
      status = "enabled"
      filter = {
        prefix                   = "logs/"
        object_size_greater_than = 1048576
      }
      expiration = {
        days = 30
      }
    },
    {
      id     = "abort-multipart"
      status = "enabled"
      abort_incomplete_multipart_upload = {
        days_after_initiation = 7
      }
    }
  ]
}
```

### Noncurrent cleaning

```terraform
resource "ovh_cloud_project_storage_object_bucket_lifecycle_configuration" "lifecycle" {
  service_name   = "<public cloud project ID>"
  region_name    = "GRA"
  container_name = "my-bucket"

  rules = [
    {
      id     = "noncurrent-version-expiration"
      status = "enabled"
      noncurrent_version_expiration = {
        noncurrent_days           = 30
        newer_noncurrent_versions = 3
      }
    },
    {
      id     = "noncurrent-version-transition"
      status = "enabled"
      noncurrent_version_transitions = [
        {
          noncurrent_days = 14
          storage_class   = "STANDARD_IA"
        }
      ]
    }
  ]
}

```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `container_name` (String) Name of the storage container.
- `region_name` (String) Region name of the storage container.
- `rules` (Attributes List) List of lifecycle rules. (see [below for nested schema](#nestedatt--rules))
- `service_name` (String) The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used.

### Read-Only

- `id` (String) Unique identifier for the resource (`service_name/region_name/container_name`).

<a id="nestedatt--rules"></a>

### Nested Schema for `rules`

Required:

- `status` (String) Rule status. Accepted values: `enabled`, `disabled`.

Optional:

- `id` (String) Rule ID. If omitted, generated by the server.
- `filter` (Attributes) Filters that identify the objects the rule applies to. If omitted, the rule applies to all objects. (see [below for nested schema](#nestedatt--rules--filter))
- `expiration` (Attributes) Configuration for expiring current object versions. (see [below for nested schema](#nestedatt--rules--expiration))
- `abort_incomplete_multipart_upload` (Attributes) Configuration for aborting incomplete multipart uploads. (see [below for nested schema](#nestedatt--rules--abort_incomplete_multipart_upload))
- `noncurrent_version_expiration` (Attributes) Configuration for expiring noncurrent object versions (requires versioning). (see [below for nested schema](#nestedatt--rules--noncurrent_version_expiration))
- `transitions` (Attributes List) Configuration for transitioning current object versions to a different storage class. (see [below for nested schema](#nestedatt--rules--transitions))
- `noncurrent_version_transitions` (Attributes List) Configuration for transitioning noncurrent object versions to a different storage class (requires versioning). (see [below for nested schema](#nestedatt--rules--noncurrent_version_transitions))

<a id="nestedatt--rules--filter"></a>

### Nested Schema for `rules.filter`

Optional:

- `prefix` (String) Prefix filter — the rule applies only to objects whose key starts with this prefix.
- `object_size_greater_than` (Number) Minimum object size in bytes to which the rule applies.
- `object_size_less_than` (Number) Maximum object size in bytes to which the rule applies.
- `tags` (String to String Map) Tags filter — the rule applies only to objects with all the specified tags.

<a id="nestedatt--rules--expiration"></a>

### Nested Schema for `rules.expiration`

Optional:

- `days` (Number) Number of days after creation before the object is deleted. Mutually exclusive with `date` and `expired_object_delete_marker`.
- `date` (String) ISO 8601 date after which objects are deleted (e.g. `2026-01-01`). Mutually exclusive with `days` and `expired_object_delete_marker`.
- `expired_object_delete_marker` (Boolean) If `true`, delete markers with no noncurrent versions are automatically removed. Cannot be specified with `days` or `date`.

<a id="nestedatt--rules--abort_incomplete_multipart_upload"></a>

### Nested Schema for `rules.abort_incomplete_multipart_upload`

Required:

- `days_after_initiation` (Number) Number of days after initiation before an incomplete multipart upload is aborted.

<a id="nestedatt--rules--noncurrent_version_expiration"></a>

### Nested Schema for `rules.noncurrent_version_expiration`

Optional:

- `noncurrent_days` (Number) Number of days after an object becomes noncurrent before it is deleted.
- `newer_noncurrent_versions` (Number) Number of noncurrent versions to retain. All noncurrent versions beyond this count are permanently deleted.

<a id="nestedatt--rules--transitions"></a>

### Nested Schema for `rules.transitions`

Required:

- `storage_class` (String) The storage class to transition objects to. Accepted values: `STANDARD`, `STANDARD_IA`, `GLACIER_IR`, `DEEP_ARCHIVE`.

Optional:

- `days` (Number) Number of days after creation before objects are transitioned. Mutually exclusive with `date`.
- `date` (String) ISO 8601 date after which objects are transitioned (e.g. `2026-01-01`). Mutually exclusive with `days`.

<a id="nestedatt--rules--noncurrent_version_transitions"></a>

### Nested Schema for `rules.noncurrent_version_transitions`

Optional:

- `noncurrent_days` (Number) Number of days after an object becomes noncurrent before it is transitioned.
- `newer_noncurrent_versions` (Number) Number of noncurrent versions to retain in the same storage class before transitioning.
- `storage_class` (String) The storage class to transition noncurrent objects to.

## Import

An existing lifecycle configuration can be imported using the composite ID `service_name/region_name/container_name`:

```bash
terraform import ovh_cloud_project_storage_object_bucket_lifecycle_configuration.lifecycle "xxxxxxxxxxxx/GRA/my-bucket"
```
